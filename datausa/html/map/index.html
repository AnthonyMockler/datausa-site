{% extends "templates/nav.html" %}

{% block body %}

<div id="map-fullscreen"></div>

{% endblock %}

{% block js %}
<script>

  var map = d3plus.viz()
    .container("#map-fullscreen")
    .error("Loading names...")
    .coords({"key": "counties", "projection": "albersUsa"})
    .type("geo_map")
    .labels(false)
    .color("color")
    .data([])
    .draw();

  load(api + "/attrs/geo", function(attrs) {
    attrs = attrs.reduce(function(obj, d){
      obj[d.id] = d;
      return obj;
    }, {});
    map.attrs(attrs).text("display_name").error("Loading coordinates...");

    load("/static/topojson/counties.json", function(data){
      map.coords(data).error(false).draw();
    });

  });

</script>
{% endblock %}
