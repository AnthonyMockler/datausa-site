<!-- extend from base layout -->
{% extends "templates/base.html" %}

{% block content %}

<nav>
  <div id="top-nav">
      <div id="menu-btn">
        <i class="fa fa-bars"></i>
      </div>

      <div id="home-btn">
          <a href="/"><img src="/static/img/home/logo_b.png" alt="DataUSA" style="width:80px" /></a>
      </div>

      <div id="search-btn">
        <div class="search-box">
          <input id="nav-search-input" class="search-input" data-search="simple-nav" type="text" placeholder="Search DataUSA&hellip;" autofocus />
        </div>
        <i class="fa fa-search" data-results="search-simple-nav"></i>
      </div>
  </div>
</nav>

<div id="menu">
  <div class="close-btn">x</div>
  <div class="menu-content">
    <ul>
      <li class="desc">
          <p>
              DataUSA lets you to explore education, economic, job, health, and demographic data for the entire U.S., combining 300+ data sets into 1,000+ visualizations.
          </p>
      </li>

      <!-- <li class="about-sum">
          <a href="#">
              <h2>About</h2>
          </a>

          <section class="desc">
              <p>
                  DataUSA lets you to explore education, economic, job, health, and demographic data for the entire U.S., combining 300+ data sets into 1,000+ visualizations. View data sources &rarr;
              </p>
          </section>
      </li> -->

       <li class="search-sum">
        <a href="/search/">
            <h2>Advanced Search</h2>
        </a>
      </li>
      <li class="profile-sum">
        <a href="/search/?q=" class="profile-link">
          <h2>
           Profiles v
          </h2>
        </a>
      </li>
      <li class="profiles-drawer">
        <a href="/search/?q=" class="profile-link-carousel disabled">
          <h2>
            Industry
          </h2>
        </a>
        <a href="/search/?q=" class="profile-link-carousel">
          <h2>
            Location
          </h2>
        </a>
        <a href="" class="profile-link-carousel disabled">
          <h2>
            Occupations
          </h2>
        </a>
        <a href="" class="profile-link-carousel">
          <h2>
            College Majors
          </h2>
        </a>
      </li>
      <li class="stories-sum">
        <a href="/story/">
            <h2>Stories</h2>
        </a>
      </li>
      <li class="map-sum">
        <a href="/map/">
            <h2>Map</h2>
        </a>
      </li>
    </ul>
  </div>

  <footer>
    <a target="_blank" href="http://www2.deloitte.com/us/en.html"><img id="deloitte" src="/static/img/footer/deloitte.png" /></a>
    <a target="_blank" href="http://macro.media.mit.edu/"><img id="macro" src="/static/img/footer/mit.png" /></a>
    <a target="_blank" href="http://www.datawheel.us/"><img id="datawheel" src="/static/img/footer/datawheel.png" /></a>
  </footer>

</div>

<div id="search-simple-nav" class="search-body">
  <div class="search-results">
  </div>

  <section class="results-show-all">
    <a href="/search/">Show all results <span class="more"></span></a>
  </section>
</div>

{% block body %}
{% endblock %}

<footer>
  <a target="_blank" href="http://www2.deloitte.com/us/en.html"><img id="deloitte" src="/static/img/footer/deloitte.png" /></a>
  <a target="_blank" href="http://macro.media.mit.edu/"><img id="macro" src="/static/img/footer/mit.png" /></a>
  <a target="_blank" href="http://www.datawheel.us/"><img id="datawheel" src="/static/img/footer/datawheel.png" /></a>
</footer>

<script>

d3.select(".close-btn").on("click", function(){
  d3.select("#menu").classed("open", false);

  var body = d3.select("body");

  body.classed("frozen", false);

  d3.select("#mask").remove();

  d3.event.preventDefault();
});

d3.select("#menu-btn").on("click", function(){
  d3.select("#menu").classed("open", !d3.select("#menu").classed("open"));

  var body = d3.select("body");

  body.classed("frozen", !d3.select("body").classed("frozen"));

  if (body.classed("frozen") === true) {
    body.append("div").attr("id", "mask");
  } else {
    d3.select("#mask").remove();
  }

  d3.event.preventDefault();
});

d3.selectAll("#search-btn .fa-search, #home-search-input").on("click", function(){
  var results_div_id = d3.select(this).attr("data-results");
  var results_div = d3.select("#"+results_div_id)
  results_div.classed("open", !results_div.classed("open"));
  
  // open search box if not home page
  if(!d3.select("body").classed("home")){
    d3.select(".search-box").classed("open", !d3.select(".search-box").classed("open"));
  }
  
  // focus input
  var search_input = this.tagName.toLowerCase() === "input" ? this : d3.select(this.parentNode).select("input").node();
  search_input.focus();
});

</script>

{% endblock %}
